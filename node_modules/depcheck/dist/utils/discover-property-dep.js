'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = discover;

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _typeof(obj) { return obj && typeof Symbol !== "undefined" && obj.constructor === Symbol ? "symbol" : typeof obj; }

function discover(depName, property, deps, rootDir) {
  try {
    var _ret = (function () {
      var file = _path2.default.resolve(rootDir, 'node_modules', depName, 'package.json');
      var metadata = require(file);
      var propertyDeps = Object.keys(metadata[property] || {});
      return {
        v: deps.filter(function (dep) {
          return propertyDeps.indexOf(dep) !== -1;
        })
      };
    })();

    if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === "object") return _ret.v;
  } catch (error) {
    return [];
  }
}
module.exports = exports['default'];